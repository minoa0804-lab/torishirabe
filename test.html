<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ‡ãƒãƒƒã‚°ãƒ†ã‚¹ãƒˆ - å–ã‚Šèª¿ã¹ãƒªã‚ºãƒ ã‚²ãƒ¼ãƒ </title>
    <style>
        body {
            font-family: 'Yu Gothic', sans-serif;
            padding: 20px;
            background: #f0f0f0;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 10px 0;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        h2 {
            color: #667eea;
        }
        button {
            padding: 10px 20px;
            margin: 5px;
            font-size: 16px;
            cursor: pointer;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 5px;
        }
        button:hover {
            background: #5568d3;
        }
        .status {
            margin: 10px 0;
            padding: 10px;
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
        }
        .error {
            background: #ffebee;
            border-left: 4px solid #f44336;
        }
        .success {
            background: #e8f5e9;
            border-left: 4px solid #4caf50;
        }
    </style>
</head>
<body>
    <h1>ğŸ”§ ãƒ‡ãƒãƒƒã‚°ãƒ†ã‚¹ãƒˆ</h1>
    
    <div class="test-section">
        <h2>1. ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ãƒ†ã‚¹ãƒˆ</h2>
        <button onclick="testDataLoad()">ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ãƒ†ã‚¹ãƒˆ</button>
        <div id="dataResult" class="status"></div>
    </div>
    
    <div class="test-section">
        <h2>2. ç”»é¢é·ç§»ãƒ†ã‚¹ãƒˆ</h2>
        <button onclick="window.location.href='index.html'">ãƒ¡ã‚¤ãƒ³ã‚²ãƒ¼ãƒ ã‚’é–‹ã</button>
    </div>
    
    <div class="test-section">
        <h2>3. é–¢æ•°ãƒ†ã‚¹ãƒˆ</h2>
        <button onclick="testFunctions()">é–¢æ•°å­˜åœ¨ãƒã‚§ãƒƒã‚¯</button>
        <div id="funcResult" class="status"></div>
    </div>
    
    <div class="test-section">
        <h2>4. ãƒ–ãƒ©ã‚¦ã‚¶äº’æ›æ€§</h2>
        <div id="browserInfo" class="status"></div>
    </div>

    <script src="data.js"></script>
    <script>
        // ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ãƒ†ã‚¹ãƒˆ
        function testDataLoad() {
            const resultDiv = document.getElementById('dataResult');
            let html = '<h3>ãƒ†ã‚¹ãƒˆçµæœï¼š</h3>';
            let allPassed = true;
            
            try {
                // SCENARIOS ã®å­˜åœ¨ãƒã‚§ãƒƒã‚¯
                if (typeof SCENARIOS === 'undefined') {
                    html += '<p class="error">âŒ SCENARIOS ãŒå®šç¾©ã•ã‚Œã¦ã„ã¾ã›ã‚“</p>';
                    allPassed = false;
                } else {
                    html += '<p class="success">âœ… SCENARIOS èª­ã¿è¾¼ã¿æˆåŠŸ</p>';
                    
                    // å„é›£æ˜“åº¦ã®ãƒã‚§ãƒƒã‚¯
                    ['easy', 'normal', 'hard'].forEach(diff => {
                        if (SCENARIOS[diff]) {
                            html += `<p class="success">âœ… ${diff.toUpperCase()} ã‚·ãƒŠãƒªã‚ª: ${SCENARIOS[diff].notes.length}ãƒãƒ¼ãƒˆ</p>`;
                        } else {
                            html += `<p class="error">âŒ ${diff.toUpperCase()} ã‚·ãƒŠãƒªã‚ªãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“</p>`;
                            allPassed = false;
                        }
                    });
                }
                
                // å®šæ•°ã®ãƒã‚§ãƒƒã‚¯
                if (typeof JUDGMENT_TIMING !== 'undefined') {
                    html += `<p class="success">âœ… JUDGMENT_TIMING: Perfect ${JUDGMENT_TIMING.perfect}s, Good ${JUDGMENT_TIMING.good}s</p>`;
                } else {
                    html += '<p class="error">âŒ JUDGMENT_TIMING ãŒå®šç¾©ã•ã‚Œã¦ã„ã¾ã›ã‚“</p>';
                    allPassed = false;
                }
                
                if (typeof SCORE_VALUES !== 'undefined') {
                    html += '<p class="success">âœ… SCORE_VALUES èª­ã¿è¾¼ã¿æˆåŠŸ</p>';
                } else {
                    html += '<p class="error">âŒ SCORE_VALUES ãŒå®šç¾©ã•ã‚Œã¦ã„ã¾ã›ã‚“</p>';
                    allPassed = false;
                }
                
                if (typeof RANK_COMMENTS !== 'undefined') {
                    html += '<p class="success">âœ… RANK_COMMENTS èª­ã¿è¾¼ã¿æˆåŠŸ</p>';
                } else {
                    html += '<p class="error">âŒ RANK_COMMENTS ãŒå®šç¾©ã•ã‚Œã¦ã„ã¾ã›ã‚“</p>';
                    allPassed = false;
                }
                
                if (allPassed) {
                    html += '<h3 class="success">ğŸ‰ å…¨ã¦ã®ãƒ‡ãƒ¼ã‚¿ãŒæ­£å¸¸ã«èª­ã¿è¾¼ã¾ã‚Œã¾ã—ãŸï¼</h3>';
                }
                
            } catch (error) {
                html += `<p class="error">âŒ ã‚¨ãƒ©ãƒ¼: ${error.message}</p>`;
            }
            
            resultDiv.innerHTML = html;
        }
        
        // é–¢æ•°ãƒ†ã‚¹ãƒˆ
        function testFunctions() {
            const resultDiv = document.getElementById('funcResult');
            let html = '<h3>å¿…è¦ãªé–¢æ•°ã®å­˜åœ¨ãƒã‚§ãƒƒã‚¯ï¼š</h3>';
            
            const requiredFunctions = [
                'showScreen', 'showTitle', 'showDifficultySelect', 'showHowToPlay',
                'startGame', 'resetGameState', 'startGameLoop', 'gameLoop',
                'spawnNote', 'updateNotes', 'updateDialogue', 'handleAction',
                'handleNGAction', 'judgePerfect', 'judgeGood', 'judgeMiss',
                'updateScore', 'updateCombo', 'showJudgment', 'endGame', 'retry'
            ];
            
            // Note: ã‚²ãƒ¼ãƒ ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ãªã„ã®ã§ã€ã“ã“ã§ã¯ç¢ºèªã§ããªã„
            html += '<p>âš ï¸ ã“ã®ãƒ†ã‚¹ãƒˆã¯ index.html ã‹ã‚‰å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™</p>';
            html += '<p>ä»¥ä¸‹ã®é–¢æ•°ãŒå¿…è¦ã§ã™ï¼š</p><ul>';
            
            requiredFunctions.forEach(func => {
                html += `<li>${func}</li>`;
            });
            
            html += '</ul>';
            resultDiv.innerHTML = html;
        }
        
        // ãƒ–ãƒ©ã‚¦ã‚¶æƒ…å ±è¡¨ç¤º
        document.addEventListener('DOMContentLoaded', () => {
            const browserDiv = document.getElementById('browserInfo');
            let html = '<h3>ãƒ–ãƒ©ã‚¦ã‚¶æƒ…å ±ï¼š</h3>';
            html += `<p><strong>User Agent:</strong> ${navigator.userAgent}</p>`;
            html += `<p><strong>è¨€èª:</strong> ${navigator.language}</p>`;
            html += `<p><strong>ç”»é¢ã‚µã‚¤ã‚º:</strong> ${window.innerWidth} x ${window.innerHeight}</p>`;
            html += `<p><strong>requestAnimationFrame:</strong> ${typeof requestAnimationFrame !== 'undefined' ? 'âœ… ã‚µãƒãƒ¼ãƒˆ' : 'âŒ éã‚µãƒãƒ¼ãƒˆ'}</p>`;
            html += `<p><strong>localStorage:</strong> ${typeof localStorage !== 'undefined' ? 'âœ… ã‚µãƒãƒ¼ãƒˆ' : 'âŒ éã‚µãƒãƒ¼ãƒˆ'}</p>`;
            browserDiv.innerHTML = html;
        });
    </script>
</body>
</html>
